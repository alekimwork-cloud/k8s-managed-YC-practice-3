apiVersion: v1
kind: ConfigMap
metadata:
  name: demo-nginx-html
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
      <title>K8s Demo</title>
      <meta charset="UTF-8">
      <style>
        body{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);}
        .container{text-align:center;background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 25px rgba(0,0,0,.2);max-width:600px;}
        h1{color:#333;margin:0 0 20px 0;}
        .info{background:#f8f9fa;padding:15px;border-radius:5px;margin:15px 0;font-family:monospace;color:#495057;}
        .pod-name{color:#667eea;font-weight:700;font-size:18px;}
        ul{text-align:left;display:inline-block;margin:10px 0;}
        li{margin:5px 0;}
      </style>
    </head>
    <body>
      <div class="container">
        <h1> Kubernetes Demo</h1>
        <p><strong> Приложение развёрнуто!</strong></p>
        
        <div class="info">
          <p><strong>Pod Hostname:</strong></p>
          <p class="pod-name" id="hostname">Loading...</p>
        </div>
        
        <div class="info">
          <p><strong> Балансировка:</strong></p>
          <p>F5 → меняется Pod Name</p>
          <p>LoadBalancer распределяет запросы</p>
        </div>

        <div class="info">
          <p><strong>Что работает:</strong></p>
          <ul>
            <li>Deployment (3 реплики nginx)</li>
            <li>Service балансирует трафик</li>
            <li>ConfigMap (конфиг отдельно)</li>
            <li>Автовосстановление подов</li>
          </ul>
        </div>
      </div>

      <script>
        document.getElementById('hostname').textContent = 
          window.location.hostname || 'Pod #' + Math.floor(Math.random()*1000);
      </script>
    </body>
    </html>
